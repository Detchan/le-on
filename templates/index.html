<!doctype html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <title>G√©n√©rateur de R√©vision Intelligent (IA)</title>
    
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <h1>üìö G√©n√©rateur de R√©vision Intelligent (IA)</h1>
    
    <form method="POST" enctype="multipart/form-data" class="upload-form">
        
        <select name="subject" required class="subject-select">
            <option value="" disabled selected>Choisir la mati√®re...</option>
            <option value="Math√©matiques">Math√©matiques</option>
            <option value="Physique-Chimie">Physique-Chimie</option>
            <option value="Histoire-G√©ographie">Histoire-G√©ographie</option>
            <option value="Philosophie">Philosophie</option>
            <option value="Biologie">Biologie/SVT</option>
            <option value="Autre">Autre (pr√©ciser dans le PDF)</option>
        </select>
        
        <input type="file" name="file" accept=".pdf" required>
        <button type="submit">G√©n√©rer Fiches & Quizz</button>
    </form>

    {% if results %}
        <div class="tabs-container">
            <div class="tab-buttons">
                <button class="tab-button active" data-tab-target="review">üìù Fiches de R√©vision</button>
                <button class="tab-button" data-tab-target="quiz">‚ùì Quiz Interactif</button>
            </div>

            <div id="review" class="tab-content active">
                <h2>Synth√®ses et Points Cl√©s G√©n√©r√©s par l'IA</h2>
                
                {% for sheet in results.review_sheets %}
                    <div class="review-group">
                        <h3>{{ sheet.title }}</h3>
                        <ul>
                            {% for point in sheet.points %}
                                <li class="review-point">{{ point }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endfor %}

            </div>
            
            <div id="quiz" class="tab-content">
                <h2>Testez vos connaissances</h2>
                
                <form id="quiz-form">
                    {% for item in results.quiz %}
                        <div class="quiz-item" id="q-{{ loop.index }}">
                            <div class="question">{{ loop.index }}. {{ item.question }}</div>
                            <ul class="options-list">
                                {% for option in item.options %}
                                    <li class="option-item">
                                        <input type="checkbox" name="q{{ loop.index }}" value="{{ option }}">
                                        {{ option }}
                                    </li>
                                {% endfor %}
                            </ul>
                            <div class="result-message" id="msg-{{ loop.index }}"></div>
                        </div>
                    {% endfor %}
                    
                    <button type="button" id="verify-button" class="check-button check-button-verify">V√©rifier les R√©ponses</button>
                    <button type="button" id="generate-new-quiz" class="check-button check-button-reset">G√©n√©rer un autre Quiz</button>
                </form>
            </div>
        </div>
    {% endif %}

    <script src="{{ url_for('static', filename='scripts.js') }}"></script>
</body>
</html>
